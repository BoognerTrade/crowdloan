(this["webpackJsonpintegritee kusama crowdloan"]=this["webpackJsonpintegritee kusama crowdloan"]||[]).push([[0],{501:function(e){e.exports=JSON.parse('{"APP_NAME":"integritee crowdloan","DEVELOPMENT_KEYRING":false,"RPC":{}}')},558:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://kusama-rpc.polkadot.io"}')},559:function(e){e.exports=JSON.parse("{}")},561:function(e,t){},569:function(e,t){},596:function(e,t){},598:function(e,t){},608:function(e,t){},610:function(e,t){},640:function(e,t){},642:function(e,t){},649:function(e,t){},650:function(e,t){},667:function(e,t){},689:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(156),i=n.n(c),s=n(0),u=n(732),o=n(724),l=n(736),j=n(733),d=n(725),b=n(722),p=(n(543),n(16)),O=n.n(p),f=n(28),v=n(35),x=n(517),h=n(500),y=n.n(h),m=n(730),E=n(726),S=n(257),C=n(348),N=n(501),g=n(558),R=n(559),k=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/crowdloan",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/crowdloan",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),w=Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},N),g),k),{},{types:R}),T=n(15),_=y.a.parse(window.location.search).rpc||w.PROVIDER_SOCKET;console.log("Connected socket: ".concat(_));var P={socket:_,jsonrpc:Object(v.a)(Object(v.a)({},x.a),w.RPC),types:w.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},A=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(v.a)(Object(v.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(v.a)(Object(v.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(v.a)(Object(v.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(v.a)(Object(v.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(v.a)(Object(v.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(v.a)(Object(v.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(v.a)(Object(v.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},I=!1,D=a.a.createContext(),K=function(e){var t=Object(v.a)({},P);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(r.useReducer)(A,t),a=Object(s.a)(n,2),c=a[0],i=a[1];return function(e,t){var n=e.apiState,r=e.socket,a=e.jsonrpc,c=e.types;if(!n){t({type:"CONNECT_INIT"});var i=new m.a(r),s=new E.a({provider:i,types:c,rpc:a});s.on("connected",(function(){t({type:"CONNECT",payload:s}),s.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),s.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),s.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(c,i),function(e,t){var n=function(){var e=Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(S.b)(w.APP_NAME);case 4:return e.next=6,Object(S.a)();case 6:n=(n=e.sent).map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(v.a)(Object(v.a)({},n),{},{name:"".concat(n.name," (").concat(n.source,")")})}})),C.a.loadAll({isDevelopment:w.DEVELOPMENT_KEYRING},n),t({type:"SET_KEYRING",payload:C.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(I)return t({type:"SET_KEYRING",payload:C.a});I=!0,n()}}(c,i),Object(T.jsx)(D.Provider,{value:c,children:e.children})},F=function(){return Object(v.a)({},Object(r.useContext)(D))},Y={paramConversion:{num:["Compact<Balance>","BalanceOf","u8","u16","u32","u64","u128","i8","i16","i32","i64","i128"]}},U=n(514),G=n(728),z=n(518),L=n(690),V=n(727),B=n(255),H=n(164);function M(e){var t=F().keyring,n=e.setAccountAddress,a=Object(r.useState)(""),c=Object(s.a)(a,2),i=c[0],u=c[1],o=t.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}})),l=o.length>0?o[0].value:"";Object(r.useEffect)((function(){n(l),u(l)}),[n,l]);return Object(T.jsx)(G.a,{attached:"top",tabular:!0,style:{backgroundColor:"#fff",borderColor:"#fff",paddingTop:"1em",paddingBottom:"1em"},children:Object(T.jsxs)(b.a,{children:[Object(T.jsx)(G.a.Menu,{children:Object(T.jsx)(z.a,{src:"".concat("/crowdloan","/assets/substrate-logo.png"),size:"mini"})}),Object(T.jsxs)(G.a.Menu,{position:"right",style:{alignItems:"center"},children:[i?null:Object(T.jsxs)("span",{children:["Add your account with the"," ",Object(T.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/polkadot-js/extension",children:"Polkadot JS Extension"})]}),Object(T.jsx)(U.CopyToClipboard,{text:i,children:Object(T.jsx)(L.a,{basic:!0,circular:!0,size:"large",icon:"user",color:i?"green":"red"})}),Object(T.jsx)(V.a,{search:!0,selection:!0,clearable:!0,placeholder:"Select an account",options:o,onChange:function(e,t){var r;r=t.value,n(r),u(r)},value:i}),Object(T.jsx)(W,{accountSelected:i})]})]})})}function W(e){var t=e.accountSelected,n=F().api,a=Object(r.useState)(0),c=Object(s.a)(a,2),i=c[0],u=c[1];return Object(r.useEffect)((function(){var e;return t&&n.query.system.account(t,(function(e){u(e.data.free.toHuman())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[n,t]),t?Object(T.jsxs)(B.a,{pointing:"left",children:[Object(T.jsx)(H.a,{name:"money",color:"green"}),i]}):null}function q(e){var t=F(),n=t.api;return t.keyring.getPairs&&n.query?Object(T.jsx)(M,Object(v.a)({},e)):null}var J=n(731),X=n(735);function Q(e){var t=F().api,n=e.finalized,a=Object(r.useState)(0),c=Object(s.a)(a,2),i=c[0],u=c[1],o=Object(r.useState)(0),j=Object(s.a)(o,2),d=j[0],b=j[1],p=n?t.derive.chain.bestNumberFinalized:t.derive.chain.bestNumber;Object(r.useEffect)((function(){var e=null;return p((function(e){u(e.toNumber()),b(0)})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[p]);var O=function(){b((function(e){return e+1}))};return Object(r.useEffect)((function(){var e=setInterval(O,1e3);return function(){return clearInterval(e)}}),[]),Object(T.jsx)(l.a.Column,{children:Object(T.jsxs)(J.a,{children:[Object(T.jsx)(J.a.Content,{textAlign:"center",children:Object(T.jsx)(X.a,{label:(n?"Finalized":"Current")+" Block",value:i})}),Object(T.jsxs)(J.a.Content,{extra:!0,children:[Object(T.jsx)(H.a,{name:"time"})," ",d]})]})})}function Z(e){var t=F().api;return t.derive&&t.derive.chain&&t.derive.chain.bestNumber&&t.derive.chain.bestNumberFinalized?Object(T.jsx)(Q,Object(v.a)({},e)):null}function $(e){var t=F(),n=t.api,a=t.socket,c=Object(r.useState)({}),i=Object(s.a)(c,2),u=i[0],o=i[1];return Object(r.useEffect)((function(){(function(){var e=Object(f.a)(O.a.mark((function e(){var t,r,a,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n.rpc.system.chain(),n.rpc.system.name(),n.rpc.system.version()]);case 3:t=e.sent,r=Object(s.a)(t,3),a=r[0],c=r[1],i=r[2],o({chain:a,nodeName:c,nodeVersion:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[n.rpc.system]),Object(T.jsx)(l.a.Column,{children:Object(T.jsxs)(J.a,{children:[Object(T.jsxs)(J.a.Content,{children:[Object(T.jsx)(J.a.Header,{children:u.nodeName}),Object(T.jsx)(J.a.Meta,{children:Object(T.jsx)("span",{children:u.chain})}),Object(T.jsx)(J.a.Description,{children:a})]}),Object(T.jsxs)(J.a.Content,{extra:!0,children:[Object(T.jsx)(H.a,{name:"setting"}),"v",u.nodeVersion]})]})})}function ee(e){var t=F().api;return t.rpc&&t.rpc.system&&t.rpc.system.chain&&t.rpc.system.name&&t.rpc.system.version?Object(T.jsx)($,Object(v.a)({},e)):null}var te=n(29),ne=n(729),re=n(723),ae=n(10);function ce(e){var t=e.accountPair,n=void 0===t?null:t,a=e.label,c=e.setStatus,i=e.color,u=void 0===i?"blue":i,o=e.style,l=void 0===o?null:o,j=e.type,d=void 0===j?"QUERY":j,b=e.attrs,p=void 0===b?null:b,x=e.disabled,h=void 0!==x&&x,y=F().api,m=Object(r.useState)(null),E=Object(s.a)(m,2),C=E[0],N=E[1],g=Object(r.useState)(null),R=Object(s.a)(g,2),k=R[0],w=R[1],_=p.palletRpc,P=p.callable,A=p.inputParams,I=p.paramFields,D=p.disableButton,K=function(){return"SUDO-TX"===d},U=function(){return"UNCHECKED-SUDO-TX"===d};Object(r.useEffect)((function(){Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&y.query.sudo){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y.query.sudo.key();case 4:(t=e.sent).isEmpty?w(null):w(t.toString());case 6:case"end":return e.stop()}}),e)})))()}),[y]);var G,z=function(){var e=Object(f.a)(O.a.mark((function e(){var t,r,a,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,r=n.meta,a=r.source,!r.isInjected){e.next=9;break}return e.next=4,Object(S.c)(a);case 4:i=e.sent,c=t,y.setSigner(i.signer),e.next=10;break;case 9:c=n;case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){var t=e.status;return t.isFinalized?c("\ud83d\ude09 Finalized. Block hash: ".concat(t.asFinalized.toString())):c("Current transaction status: ".concat(t.type))},B=function(e){return c("\ud83d\ude1e Transaction Failed: ".concat(e.toString()))},H=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:n=e.sent,r=ee(I,A),a=r?y.tx.sudo.sudo((t=y.tx[_])[P].apply(t,Object(ae.a)(r))):y.tx.sudo.sudo(y.tx[_][P]()),c=a.signAndSend(n,V).catch(B),N((function(){return c}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:n=e.sent,r=y.tx.sudo.sudoUncheckedWeight((t=y.tx[_])[P].apply(t,Object(ae.a)(A)),0),a=r.signAndSend(n,V).catch(B),N((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:return n=e.sent,r=ee(I,A),a=r?(t=y.tx[_])[P].apply(t,Object(ae.a)(r)):y.tx[_][P](),e.next=7,a.signAndSend(n,V).catch(B);case 7:c=e.sent,N((function(){return c}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(I,A),r=n?(t=y.tx[_])[P].apply(t,Object(ae.a)(n)):y.tx[_][P](),e.next=4,r.send(V).catch(B);case 4:a=e.sent,N((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){e.isNone?c("None"):c(e.toString())},X=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(I,A),e.next=3,(t=y.query[_])[P].apply(t,Object(ae.a)(n).concat([J]));case 3:r=e.sent,N((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(I,A,{emptyAsNull:!1}),e.next=3,(t=y.rpc[_])[P].apply(t,Object(ae.a)(n).concat([J]));case 3:r=e.sent,N((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=y.consts[_][P];e.isNone?c("None"):c(e.toString())},$=function(){var e=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C&&(C(),N(null)),c("Sending..."),K()&&H()||U()&&M()||"SIGNED-TX"===d&&W()||"UNSIGNED-TX"===d&&q()||"QUERY"===d&&X()||"RPC"===d&&Q()||"CONSTANT"===d&&Z();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{emptyAsNull:!0},r=t.map((function(e){return"object"===typeof e&&null!==e&&"string"===typeof e.value?e.value.trim():"string"===typeof e?e.trim():e})),a=e.map((function(e,t){return Object(v.a)(Object(v.a)({},e),{},{value:r[t]||null})}));return a.reduce((function(e,t){var r=t.type,a=void 0===r?"string":r,c=t.value;if(null==c||""===c)return n.emptyAsNull?[].concat(Object(ae.a)(e),[null]):e;var i=c;return a.indexOf("Vec<")>=0?(i=(i=i.split(",").map((function(e){return e.trim()}))).map((function(e){return te(a)?e.indexOf(".")>=0?Number.parseFloat(e):Number.parseInt(e):e})),[].concat(Object(ae.a)(e),[i])):(te(a)&&(i=i.indexOf(".")>=0?Number.parseFloat(i):Number.parseInt(i)),[].concat(Object(ae.a)(e),[i]))}),[])},te=function(e){return Y.paramConversion.num.some((function(t){return e.indexOf(t)>=0}))};return Object(T.jsx)(L.a,{basic:!0,color:u,style:l,type:"submit",onClick:$,disabled:h||!_||!P||!(0===I.length||I.every((function(e,t){var n=A[t];if(e.optional)return!0;if(null==n)return!0;var r="object"===typeof n?n.value:n;return null!==r&&""!==r})))||""===n||D||(K()||U())&&(G=n,!(k&&G&&G.address===k)),children:a})}function ie(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)({addressTo:null,amount:0}),u=Object(s.a)(i,2),o=u[0],j=u[1],d=e.accountPair,b=Object(r.useState)(!0),p=Object(s.a)(b,2),O=p[0],f=p[1],x=o.amount;return Object(T.jsxs)(l.a.Column,{width:8,children:[Object(T.jsx)("h1",{children:"Contribute"}),Object(T.jsxs)(ne.a,{children:[Object(T.jsx)(ne.a.Field,{children:Object(T.jsx)(re.a,{fluid:!0,label:"Amount in KSM",type:"number",value:x,state:"amount",step:"0.1",min:.1,onChange:function(e,t){j((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(te.a)({},t.state,t.value))})),""===t.value||t.value<=0?f(!0):f(!1)}})}),Object(T.jsx)(ne.a.Field,{style:{textAlign:"center"},children:Object(T.jsx)(ce,{accountPair:d,label:"Contribute",type:"SIGNED-TX",setStatus:c,attrs:{palletRpc:"crowdloan",callable:"contribute",inputParams:["2015",x*Math.pow(10,12),null],paramFields:[!0,!0,!1],disableButton:O}})}),Object(T.jsx)("div",{style:{overflowWrap:"break-word"},children:a})]})]})}function se(e){var t=F().api,n=Object(r.useState)(!0),a=Object(s.a)(n,2),c=a[0],i=a[1],u=Object(r.useState)({}),o=Object(s.a)(u,2),l=o[0],j=o[1],d=function(e){var t=e.toHuman();j(l=t),i(!1)},b=["2004"],p=function(){var e=Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=t.query.crowdloan).funds.apply(n,b.concat([d]));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return 0===Object.keys(l).length&&p(),Object(T.jsxs)("div",{children:[Object(T.jsx)("h1",{children:"Crowdloan Funds"}),c?Object(T.jsx)("div",{children:"loading..."}):Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{children:["raised: ",l.raised]}),Object(T.jsxs)("div",{children:["end: ",l.end]}),Object(T.jsxs)("div",{children:["cap: ",l.cap]}),Object(T.jsxs)("div",{children:["last_contribution.preEnding: ",l.lastContribution.PreEnding]}),Object(T.jsxs)("div",{children:["first_period: ",l.firstPeriod]}),Object(T.jsxs)("div",{children:["last_period: ",l.lastPeriod]})]})]})}function ue(){var e,t=Object(r.useState)(null),n=Object(s.a)(t,2),a=n[0],c=n[1],i=F(),p=i.apiState,O=i.keyring,f=i.keyringState,v=i.apiError,x=a&&"READY"===f&&O.getPair(a),h=function(e){return Object(T.jsx)(u.a,{active:!0,children:Object(T.jsx)(o.a,{size:"small",children:e})})};if("ERROR"===p)return e=v,Object(T.jsx)(l.a,{centered:!0,columns:2,padded:!0,children:Object(T.jsx)(l.a.Column,{children:Object(T.jsx)(j.a,{negative:!0,compact:!0,floating:!0,header:"Error Connecting to Substrate",content:"".concat(JSON.stringify(e,null,4))})})});if("READY"!==p)return h("Connecting to Kusama");if("READY"!==f)return h("Loading accounts (please review any extension's authorization)");var y=Object(r.createRef)();return Object(T.jsxs)("div",{ref:y,children:[Object(T.jsx)(d.a,{context:y,children:Object(T.jsx)(q,{setAccountAddress:c})}),Object(T.jsx)(b.a,{children:Object(T.jsxs)(l.a,{stackable:!0,columns:"equal",children:[Object(T.jsxs)(l.a.Row,{stretched:!0,children:[Object(T.jsx)(ee,{}),Object(T.jsx)(Z,{})]}),Object(T.jsx)(l.a.Row,{children:Object(T.jsx)(se,{})}),Object(T.jsx)(l.a.Row,{children:Object(T.jsx)(ie,{accountPair:x})})]})})]})}function oe(){return Object(T.jsx)(K,{children:Object(T.jsx)(ue,{})})}i.a.render(Object(T.jsx)(oe,{}),document.getElementById("root"))}},[[689,1,2]]]);
//# sourceMappingURL=main.1468bee2.chunk.js.map