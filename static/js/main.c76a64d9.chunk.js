(this["webpackJsonpintegritee kusama crowdloan"]=this["webpackJsonpintegritee kusama crowdloan"]||[]).push([[0],{502:function(e){e.exports=JSON.parse('{"APP_NAME":"integritee crowdloan","DEVELOPMENT_KEYRING":false,"RPC":{}}')},538:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://kusama-rpc.polkadot.io"}')},539:function(e){e.exports=JSON.parse("{}")},541:function(e,t){},549:function(e,t){},576:function(e,t){},578:function(e,t){},588:function(e,t){},590:function(e,t){},620:function(e,t){},622:function(e,t){},629:function(e,t){},630:function(e,t){},647:function(e,t){},671:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(156),i=n.n(c),s=n(1),u=n(705),o=n(697),l=n(709),j=n(706),d=n(698),b=n(695),p=(n(536),n(18)),O=n.n(p),f=n(31),v=n(37),x=n(254),h=n(707),y=n(699),m=n(261),E=n(352),S=n(502),C=n(538),N=n(539),g=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/crowdloan",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/crowdloan",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),R=Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},S),C),g),{},{types:N}),k=n(17),w=R.PROVIDER_SOCKET;console.log("Connected socket: ".concat(w));var T={socket:w,jsonrpc:Object(v.a)(Object(v.a)({},x.a),R.RPC),types:R.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},_=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(v.a)(Object(v.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(v.a)(Object(v.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(v.a)(Object(v.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(v.a)(Object(v.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(v.a)(Object(v.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(v.a)(Object(v.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(v.a)(Object(v.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},P=!1,A=a.a.createContext(),I=function(e){var t=Object(v.a)({},T);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(r.useReducer)(_,t),a=Object(s.a)(n,2),c=a[0],i=a[1];return function(e,t){var n=e.apiState,r=e.socket,a=e.jsonrpc,c=e.types;if(!n){t({type:"CONNECT_INIT"});var i=new h.a(r),s=new y.a({provider:i,types:c,rpc:a});s.on("connected",(function(){t({type:"CONNECT",payload:s}),s.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),s.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),s.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(c,i),function(e,t){var n=function(){var e=Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(m.b)(R.APP_NAME);case 4:return e.next=6,Object(m.a)();case 6:n=(n=e.sent).map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(v.a)(Object(v.a)({},n),{},{name:"".concat(n.name," (").concat(n.source,")")})}})),E.a.loadAll({isDevelopment:R.DEVELOPMENT_KEYRING},n),t({type:"SET_KEYRING",payload:E.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(P)return t({type:"SET_KEYRING",payload:E.a});P=!0,n()}}(c,i),Object(k.jsx)(A.Provider,{value:c,children:e.children})},D=function(){return Object(v.a)({},Object(r.useContext)(A))},K={paramConversion:{num:["Compact<Balance>","BalanceOf","u8","u16","u32","u64","u128","i8","i16","i32","i64","i128"]}},F=n(512),Y=n(701),U=n(515),G=n(672),z=n(700),L=n(259),V=n(164);function B(e){var t=D().keyring,n=e.setAccountAddress,a=Object(r.useState)(""),c=Object(s.a)(a,2),i=c[0],u=c[1],o=t.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}})),l=o.length>0?o[0].value:"";Object(r.useEffect)((function(){n(l),u(l)}),[n,l]);return Object(k.jsx)(Y.a,{attached:"top",tabular:!0,style:{backgroundColor:"#fff",borderColor:"#fff",paddingTop:"1em",paddingBottom:"1em"},children:Object(k.jsxs)(b.a,{children:[Object(k.jsx)(Y.a.Menu,{children:Object(k.jsx)(U.a,{src:"".concat("/crowdloan","/assets/substrate-logo.png"),size:"mini"})}),Object(k.jsxs)(Y.a.Menu,{position:"right",style:{alignItems:"center"},children:[i?null:Object(k.jsxs)("span",{children:["Add your account with the"," ",Object(k.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/polkadot-js/extension",children:"Polkadot JS Extension"})]}),Object(k.jsx)(F.CopyToClipboard,{text:i,children:Object(k.jsx)(G.a,{basic:!0,circular:!0,size:"large",icon:"user",color:i?"green":"red"})}),Object(k.jsx)(z.a,{search:!0,selection:!0,clearable:!0,placeholder:"Select an account",options:o,onChange:function(e,t){var r;r=t.value,n(r),u(r)},value:i}),Object(k.jsx)(H,{accountSelected:i})]})]})})}function H(e){var t=e.accountSelected,n=D().api,a=Object(r.useState)(0),c=Object(s.a)(a,2),i=c[0],u=c[1];return Object(r.useEffect)((function(){var e;return t&&n.query.system.account(t,(function(e){u(e.data.free.toHuman())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[n,t]),t?Object(k.jsxs)(L.a,{pointing:"left",children:[Object(k.jsx)(V.a,{name:"money",color:"green"}),i]}):null}function M(e){var t=D(),n=t.api;return t.keyring.getPairs&&n.query?Object(k.jsx)(B,Object(v.a)({},e)):null}var W=n(703),q=n(708);function J(e){var t=D().api,n=e.finalized,a=Object(r.useState)(0),c=Object(s.a)(a,2),i=c[0],u=c[1],o=Object(r.useState)(0),j=Object(s.a)(o,2),d=j[0],b=j[1],p=n?t.derive.chain.bestNumberFinalized:t.derive.chain.bestNumber;Object(r.useEffect)((function(){var e=null;return p((function(e){u(e.toNumber()),b(0)})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[p]);var O=function(){b((function(e){return e+1}))};return Object(r.useEffect)((function(){var e=setInterval(O,1e3);return function(){return clearInterval(e)}}),[]),Object(k.jsx)(l.a.Column,{children:Object(k.jsxs)(W.a,{children:[Object(k.jsx)(W.a.Content,{textAlign:"center",children:Object(k.jsx)(q.a,{label:(n?"Finalized":"Current")+" Block",value:i})}),Object(k.jsxs)(W.a.Content,{extra:!0,children:[Object(k.jsx)(V.a,{name:"time"})," ",d]})]})})}function X(e){var t=D().api;return t.derive&&t.derive.chain&&t.derive.chain.bestNumber&&t.derive.chain.bestNumberFinalized?Object(k.jsx)(J,Object(v.a)({},e)):null}function Q(e){var t=D(),n=t.api,a=t.socket,c=Object(r.useState)({}),i=Object(s.a)(c,2),u=i[0],o=i[1];return Object(r.useEffect)((function(){(function(){var e=Object(f.a)(O.a.mark((function e(){var t,r,a,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n.rpc.system.chain(),n.rpc.system.name(),n.rpc.system.version()]);case 3:t=e.sent,r=Object(s.a)(t,3),a=r[0],c=r[1],i=r[2],o({chain:a,nodeName:c,nodeVersion:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[n.rpc.system]),Object(k.jsx)(l.a.Column,{children:Object(k.jsxs)(W.a,{children:[Object(k.jsxs)(W.a.Content,{children:[Object(k.jsx)(W.a.Header,{children:u.nodeName}),Object(k.jsx)(W.a.Meta,{children:Object(k.jsx)("span",{children:u.chain})}),Object(k.jsx)(W.a.Description,{children:a})]}),Object(k.jsxs)(W.a.Content,{extra:!0,children:[Object(k.jsx)(V.a,{name:"setting"}),"v",u.nodeVersion]})]})})}function Z(e){var t=D().api;return t.rpc&&t.rpc.system&&t.rpc.system.chain&&t.rpc.system.name&&t.rpc.system.version?Object(k.jsx)(Q,Object(v.a)({},e)):null}var $=n(44),ee=n(702),te=n(696),ne=n(13);function re(e){var t=e.accountPair,n=void 0===t?null:t,a=e.label,c=e.setStatus,i=e.color,u=void 0===i?"blue":i,o=e.style,l=void 0===o?null:o,j=e.type,d=void 0===j?"QUERY":j,b=e.attrs,p=void 0===b?null:b,x=e.disabled,h=void 0!==x&&x,y=D().api,E=Object(r.useState)(null),S=Object(s.a)(E,2),C=S[0],N=S[1],g=Object(r.useState)(null),R=Object(s.a)(g,2),w=R[0],T=R[1],_=p.palletRpc,P=p.callable,A=p.inputParams,I=p.paramFields,F=p.disableButton,Y=function(){return"SUDO-TX"===d},U=function(){return"UNCHECKED-SUDO-TX"===d};Object(r.useEffect)((function(){Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&y.query.sudo){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y.query.sudo.key();case 4:(t=e.sent).isEmpty?T(null):T(t.toString());case 6:case"end":return e.stop()}}),e)})))()}),[y]);var z,L=function(){var e=Object(f.a)(O.a.mark((function e(){var t,r,a,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,r=n.meta,a=r.source,!r.isInjected){e.next=9;break}return e.next=4,Object(m.c)(a);case 4:i=e.sent,c=t,y.setSigner(i.signer),e.next=10;break;case 9:c=n;case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){var t=e.status;return t.isFinalized?c("\ud83d\ude09 Finalized. Block hash: ".concat(t.asFinalized.toString())):c("Current transaction status: ".concat(t.type))},B=function(e){return c("\ud83d\ude1e Transaction Failed: ".concat(e.toString()))},H=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:n=e.sent,r=ee(I,A),a=r?y.tx.sudo.sudo((t=y.tx[_])[P].apply(t,Object(ne.a)(r))):y.tx.sudo.sudo(y.tx[_][P]()),c=a.signAndSend(n,V).catch(B),N((function(){return c}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:n=e.sent,r=y.tx.sudo.sudoUncheckedWeight((t=y.tx[_])[P].apply(t,Object(ne.a)(A)),0),a=r.signAndSend(n,V).catch(B),N((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:return n=e.sent,r=ee(I,A),a=r?(t=y.tx[_])[P].apply(t,Object(ne.a)(r)):y.tx[_][P](),e.next=7,a.signAndSend(n,V).catch(B);case 7:c=e.sent,N((function(){return c}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(I,A),r=n?(t=y.tx[_])[P].apply(t,Object(ne.a)(n)):y.tx[_][P](),e.next=4,r.send(V).catch(B);case 4:a=e.sent,N((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){e.isNone?c("None"):c(e.toString())},X=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(I,A),e.next=3,(t=y.query[_])[P].apply(t,Object(ne.a)(n).concat([J]));case 3:r=e.sent,N((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(I,A,{emptyAsNull:!1}),e.next=3,(t=y.rpc[_])[P].apply(t,Object(ne.a)(n).concat([J]));case 3:r=e.sent,N((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=y.consts[_][P];e.isNone?c("None"):c(e.toString())},$=function(){var e=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C&&(C(),N(null)),c("Sending..."),Y()&&H()||U()&&M()||"SIGNED-TX"===d&&W()||"UNSIGNED-TX"===d&&q()||"QUERY"===d&&X()||"RPC"===d&&Q()||"CONSTANT"===d&&Z();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{emptyAsNull:!0},r=t.map((function(e){return"object"===typeof e&&null!==e&&"string"===typeof e.value?e.value.trim():"string"===typeof e?e.trim():e})),a=e.map((function(e,t){return Object(v.a)(Object(v.a)({},e),{},{value:r[t]||null})}));return a.reduce((function(e,t){var r=t.type,a=void 0===r?"string":r,c=t.value;if(null==c||""===c)return n.emptyAsNull?[].concat(Object(ne.a)(e),[null]):e;var i=c;return a.indexOf("Vec<")>=0?(i=(i=i.split(",").map((function(e){return e.trim()}))).map((function(e){return te(a)?e.indexOf(".")>=0?Number.parseFloat(e):Number.parseInt(e):e})),[].concat(Object(ne.a)(e),[i])):(te(a)&&(i=i.indexOf(".")>=0?Number.parseFloat(i):Number.parseInt(i)),[].concat(Object(ne.a)(e),[i]))}),[])},te=function(e){return K.paramConversion.num.some((function(t){return e.indexOf(t)>=0}))};return Object(k.jsx)(G.a,{basic:!0,color:u,style:l,type:"submit",onClick:$,disabled:h||!_||!P||!(0===I.length||I.every((function(e,t){var n=A[t];if(e.optional)return!0;if(null==n)return!0;var r="object"===typeof n?n.value:n;return null!==r&&""!==r})))||""===n||F||(Y()||U())&&(z=n,!(w&&z&&z.address===w)),children:a})}function ae(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)({addressTo:null,amount:0}),u=Object(s.a)(i,2),o=u[0],j=u[1],d=e.accountPair,b=Object(r.useState)(!0),p=Object(s.a)(b,2),O=p[0],f=p[1],x=o.amount;return Object(k.jsxs)(l.a.Column,{width:8,children:[Object(k.jsx)("h1",{children:"Contribute"}),Object(k.jsxs)(ee.a,{children:[Object(k.jsx)(ee.a.Field,{children:Object(k.jsx)(te.a,{fluid:!0,label:"Amount in KSM",type:"number",value:x,state:"amount",step:"0.1",min:.1,onChange:function(e,t){j((function(e){return Object(v.a)(Object(v.a)({},e),{},Object($.a)({},t.state,t.value))})),""===t.value||t.value<=0?f(!0):f(!1)}})}),Object(k.jsx)(ee.a.Field,{style:{textAlign:"center"},children:Object(k.jsx)(re,{accountPair:d,label:"Contribute",type:"SIGNED-TX",setStatus:c,attrs:{palletRpc:"crowdloan",callable:"contribute",inputParams:["2015",x*Math.pow(10,12),null],paramFields:[!0,!0,!1],disableButton:O}})}),Object(k.jsx)("div",{style:{overflowWrap:"break-word"},children:a})]})]})}function ce(e){var t=D().api,n=Object(r.useState)(!0),a=Object(s.a)(n,2),c=a[0],i=a[1],u=Object(r.useState)({}),o=Object(s.a)(u,2),l=o[0],j=o[1],d=function(e){var t=e.toHuman();j(l=t),i(!1)},b=["2004"],p=function(){var e=Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(n=t.query.crowdloan).funds.apply(n,b.concat([d]));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return 0===Object.keys(l).length&&p(),Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:"Crowdloan Funds"}),c?Object(k.jsx)("div",{children:"loading..."}):Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{children:["raised: ",l.raised]}),Object(k.jsxs)("div",{children:["end: ",l.end]}),Object(k.jsxs)("div",{children:["cap: ",l.cap]}),Object(k.jsxs)("div",{children:["last_contribution.preEnding: ",l.lastContribution.PreEnding]}),Object(k.jsxs)("div",{children:["first_period: ",l.firstPeriod]}),Object(k.jsxs)("div",{children:["last_period: ",l.lastPeriod]})]})]})}function ie(){var e,t=Object(r.useState)(null),n=Object(s.a)(t,2),a=n[0],c=n[1],i=D(),p=i.apiState,O=i.keyring,f=i.keyringState,v=i.apiError,x=a&&"READY"===f&&O.getPair(a),h=function(e){return Object(k.jsx)(u.a,{active:!0,children:Object(k.jsx)(o.a,{size:"small",children:e})})};if("ERROR"===p)return e=v,Object(k.jsx)(l.a,{centered:!0,columns:2,padded:!0,children:Object(k.jsx)(l.a.Column,{children:Object(k.jsx)(j.a,{negative:!0,compact:!0,floating:!0,header:"Error Connecting to Substrate",content:"".concat(JSON.stringify(e,null,4))})})});if("READY"!==p)return h("Connecting to Kusama");if("READY"!==f)return h("Loading accounts (please review any extension's authorization)");var y=Object(r.createRef)();return Object(k.jsxs)("div",{ref:y,children:[Object(k.jsx)(d.a,{context:y,children:Object(k.jsx)(M,{setAccountAddress:c})}),Object(k.jsx)(b.a,{children:Object(k.jsxs)(l.a,{stackable:!0,columns:"equal",children:[Object(k.jsxs)(l.a.Row,{stretched:!0,children:[Object(k.jsx)(Z,{}),Object(k.jsx)(X,{})]}),Object(k.jsx)(l.a.Row,{children:Object(k.jsx)(ce,{})}),Object(k.jsx)(l.a.Row,{children:Object(k.jsx)(ae,{accountPair:x})})]})})]})}function se(){return Object(k.jsx)(I,{children:Object(k.jsx)(ie,{})})}i.a.render(Object(k.jsx)(se,{}),document.getElementById("root"))}},[[671,1,2]]]);
//# sourceMappingURL=main.c76a64d9.chunk.js.map